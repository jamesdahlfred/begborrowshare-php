'use strict';(function(e,l,m,n){var c=c||angular.module("begborrowshare","ngSanitize ngResource ngRoute ngAnimate ngCookies ngTouch".split(" "));c.config(["$routeProvider","$httpProvider",function(b,a){b.when("/dashboard",{templateUrl:"/assets/partials/dashboard.html"}).when("/account",{templateUrl:"/assets/partials/account.html"}).when("/settings",{templateUrl:"/assets/partials/settings.html"}).when("/login",{templateUrl:"/assets/partials/login.html"}).when("/search",{templateUrl:"/assets/partials/search.html"}).when("/",
{templateUrl:"/assets/partials/home.html"}).otherwise({redirectTo:"/"})}]);c.run(["$rootScope","$location","authenticationService","flashService",function(b,a,d,c){var f=["/account","/beg/:id","/borrow/:id","/share/:id"];b.$on("$routeChangeStart",function(b,g,h){-1<f.indexOf(a.path())&&!d.isLoggedIn()&&(a.path("/login"),c.show("Please log in to continue."));e(".navbar-brand, .navbar a").each(function(b,a){var d=e(a).attr("href");location.href.substr(location.href.indexOf(d))==d?e(a).parent().addClass("active"):
e(a).parent().removeClass("active")})})}]);c.controller("loginController",["$scope","$location","authenticationService",function(b,a,d){b.credentials={email:"",password:""};b.login=function(){d.login(b.credentials).success(function(){a.path("/home")})}}]);c.controller("searchController",["$scope","searchService",function(b,a){b.query="";b.search=function(){a.search(b.query).success(function(a){$location.path("/#/search?q="+b.query);b.searchResults=a})}}]);c.service("authenticationService",["$http",
"$sanitize","sessionService","flashService","CSRF_TOKEN",function(b,a,d,c,f){var e=function(){d.set("authenticated",!0)},g=function(){d.unset("authenticated")},h=function(a){c.show(a.flash)},k=function(b){return{email:a(b.email),password:a(b.password),csrf_token:f}};return{login:function(a){a=b.post("/auth/login",k(a));a.success(e);a.success(c.clear);a.error(h);return a},logout:function(){var a=b.get("/auth/logout");a.success(g);return a},isLoggedIn:function(){return d.get("authenticated")}}}]);c.service("flashService",
["$rootScope",function(b){return{show:function(a){b.flash=a},clear:function(){b.flash=""}}}]);c.service("searchService",["$http","$sanitize","CSRF_TOKEN",function(b,a,d){var c=function(b){return{query:a(query),csrf_token:d}};return{search:function(a){return b.post("/search",c(c)).success(function(){}).error(function(){})}}}]);c.service("sessionService",["$cookieStore",function(b){return{get:function(a){return Modernizr.sessionStorage?sessionStorage.getItem(a):b.get(a)},set:function(a,c){return Modernizr.sessionStorage?
sessionStorage.setItem(a,c):b.put(a,c)},unset:function(a){return Modernizr.sessionStorage?sessionStorage.removeItem(a):b.remove(a)}}}])})(jQuery,window,document);
